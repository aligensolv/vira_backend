enum BookingStatus {
  INITIAL
  ACTIVE
  CANCELLED
  COMPLETED
}

model Booking {
  id Int @id @default(autoincrement())

  user_id Int
  user    User @relation(fields: [user_id], references: [id])

  place_id Int
  place    Place @relation(fields: [place_id], references: [id])

  start_time       DateTime
  end_time         DateTime

  // User requested duration
  requested_duration_minutes Int

  // Actual duration (after extension)
  actual_duration_minutes Int

  // Pricing
  price_per_hour Decimal @db.Decimal(10, 2)
  total_price    Decimal @db.Decimal(10, 2)

  status BookingStatus @default(INITIAL)

  // Relations
  payment          Payment?
  extensions       BookingExtension[]

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@index([place_id, start_time, end_time])
  @@index([user_id])
  @@map("bookings")
}
